<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PTANonCrown.CoarseWoodyMaterialPage"
             xmlns:viewModels="clr-namespace:PTANonCrown.ViewModel"
             xmlns:behav="clr-namespace:PTANonCrown.Behaviours"
             BackgroundColor="#F0F0F0"
             Title="">
    <!--<ContentPage.BindingContext>
        <viewModels:MainViewModel />
    </ContentPage.BindingContext>-->
    <VerticalStackLayout>
        <Border BackgroundColor="LightGoldenrodYellow"
                StrokeShape="RoundRectangle 2,2,2,2"
                WidthRequest="200">
            <HorizontalStackLayout HorizontalOptions="Center">
                <Label Text="Stand"
                       FontAttributes="Bold"
                       Margin="10,0,0,0" />
                <Label Text="{Binding CurrentStand.StandNumber}"
                       Margin="3,0,0,0" />
                <Label Text="Plot"
                       FontAttributes="Bold"
                       Margin="10,0,0,0" />
                <Label Text="{Binding CurrentPlot.PlotNumber}"
                       Margin="3,0,0,0" />
            </HorizontalStackLayout>

        </Border>

        <Label Text="Coarse Woody Material"
               Style="{StaticResource Headline}" />

        <VerticalStackLayout HorizontalOptions="Start">
            <HorizontalStackLayout>
                <Label Text="Transect Length (m)" WidthRequest="150"/>
                <Entry Text="{Binding TransectLength}" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Transect Direction"
                       WidthRequest="150" />
                <Picker  WidthRequest="100"
                         SelectedItem="{Binding TransectDirection}"
                         ItemDisplayBinding="{Binding Name}"
                         ItemsSource="{Binding TransectDirectionOptions}" >
                    <Picker.Items>

                    </Picker.Items>
                    </Picker>
            </HorizontalStackLayout>
            

        </VerticalStackLayout>
            <CollectionView ItemsSource="{Binding CoarseWoody}"
                        BackgroundColor="LightGrey"
                        HorizontalOptions="StartAndExpand">
                <!-- Header Row -->
                <CollectionView.Header>
                    <Grid ColumnDefinitions="75,130,130,130,130"
                      BackgroundColor="DarkGray">
                        <Label Text="DBH (cm)"
                               Style="{StaticResource GridHeader}"
                               Grid.Column="0" />
                        <Label Text="Softwood"
                               Style="{StaticResource GridHeader}"
                               Grid.Column="1" />
                        <Label Text="Hardwood"
                               Style="{StaticResource GridHeader}"
                               Grid.Column="2" />
                        <Label Text="Unknown"
                               Style="{StaticResource GridHeader}"
                               Grid.Column="3" />
                        <Label Text="Cavity"
                               Style="{StaticResource GridHeader}"
                               Grid.Column="4" />
                    </Grid>
                </CollectionView.Header>

                <!-- Data Rows -->
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="75,130,130,130,130"
                          BackgroundColor="LightGrey">
                            <Label Text="{Binding DBH_range}"
                                   Grid.Column="0" />
                            <HorizontalStackLayout Grid.Column="1">

                            <Entry Text="{Binding Tally_Softwood}"
                                   WidthRequest="10"
                                   HorizontalOptions="Start"
                                   Style="{StaticResource GridEntry}">
                                <Entry.Behaviors>
                                    <behav:EntryFormBehaviour />
                                </Entry.Behaviors>
                            </Entry>
                            <Stepper Value="{Binding Tally_Softwood}" />


                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Column="2"
                                                   HorizontalOptions="Start">
                            <Entry Text="{Binding Tally_Hardwood}"
                                   WidthRequest="10"
                                   Style="{StaticResource GridEntry}">
                                <Entry.Behaviors>
                                    <behav:EntryFormBehaviour />
                                </Entry.Behaviors>
                            </Entry>
                            <Stepper Value="{Binding Tally_Hardwood}" />

                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Column="3">
                            <Entry Text="{Binding Tally_Unknown}"
                                   WidthRequest="10"
                                   Style="{StaticResource GridEntry}">
                                <Entry.Behaviors>
                                    <behav:EntryFormBehaviour />
                                </Entry.Behaviors>
                            </Entry>
                            <Stepper Value="{Binding Tally_Unknown}" />

                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Column="4">

                            <Entry Text="{Binding Tally_Cavity}"
                                   WidthRequest="10"
                                   Style="{StaticResource GridEntry}">
                                <Entry.Behaviors>
                                    <behav:EntryFormBehaviour />
                                </Entry.Behaviors>
                            </Entry>
                            <Stepper Value="{Binding Tally_Cavity}" />

                            </HorizontalStackLayout>

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
</ContentPage>