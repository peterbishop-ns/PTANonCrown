<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:local="clr-namespace:PTANonCrown"
             x:Class="PTANonCrown.PlotPage"
             xmlns:mvvm="http://schemas.microsoft.com/xaml/behaviors"
             BackgroundColor="#F0F0F0"
             xmlns:enum="clr-namespace:PTANonCrown.Data.Models;assembly=PTANonCrown.Data"
             xmlns:viewModels="clr-namespace:PTANonCrown.ViewModel"
             xmlns:converter="clr-namespace:PTANonCrown.Converter"
             Title="Plot">
    
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:StringToVisibilityConverter x:Key="StringToVisibilityConverter" />
            <converter:ZeroToEmptyStringConverter x:Key="ZeroToEmptyStringConverter" />
            <converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto,*">
        <VerticalStackLayout Grid.Row="0">
            <Label Text="{Binding AllStandAllsErrors}"
                   Background="Pink"
                   Padding="5"
                   IsVisible="{Binding AllStandAllsErrors, 
Converter={StaticResource StringToVisibilityConverter}}" />
        </VerticalStackLayout>
        <ScrollView Grid.Row="1">
            <VerticalStackLayout>
            <!-- PLOT NUMBERS -->
            <Grid RowDefinitions="Auto,Auto,Auto"
                  Margin="10,0,0,0">
                <VerticalStackLayout Grid.Row="0">
                    <HorizontalStackLayout>
                        <Label Text="Select Plot"
                               Style="{StaticResource LabelPlot}" />
                        <ImageButton Source="info.png"
                                     Style="{StaticResource ImageButtonHelper}"
                                     Command="{Binding ShowHelperTextCommand}"
                                     CommandParameter="PlotNumber" />
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="20">
                        <Picker ItemsSource="{Binding CurrentStand.Plots, Mode=TwoWay}"
                                WidthRequest="150"
                                SelectedItem="{Binding CurrentPlot, Mode=TwoWay}"
                                ItemDisplayBinding="{Binding PlotNumber, Mode=TwoWay}"
                                Margin="5,0,0,0" />


                        <Button Text="Delete"
                                Command="{Binding DeletePlotCommand}"
                                CommandParameter="{Binding CurrentPlot}"
                                Style="{StaticResource ButtonRed}" />
                        <Button Text="New"
                                Style="{StaticResource ButtonGreen}"
                                Command="{Binding NewPlotCommand}" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Row="1">
                    <HorizontalStackLayout>
                        <Label Text="Edit Plot Number"
                               Style="{StaticResource LabelPlot}" />
                        <ImageButton Source="info.png"
                                     Style="{StaticResource ImageButtonHelper}"
                                     Command="{Binding ShowHelperTextCommand}"
                                     CommandParameter="PlotNumberEdit" />
                    </HorizontalStackLayout>
                        <Entry Text="{Binding CurrentPlot.PlotNumber, 
                            Converter={StaticResource ZeroToEmptyStringConverter}, Mode=TwoWay}"
                           Style="{StaticResource EntryStand}"
                           HorizontalOptions="Start"
                           WidthRequest="80" />
                </VerticalStackLayout>
                <VerticalStackLayout Grid.Row="2">
                    <HorizontalStackLayout>
                        <Label Text="Comments"
                               Style="{StaticResource LabelPlot}" />
                        <ImageButton Source="info.png"
                                     Style="{StaticResource ImageButtonHelper}"
                                     Command="{Binding ShowHelperTextCommand}"
                                     CommandParameter="PlotComments" />
                    </HorizontalStackLayout>

                    <Editor Placeholder="Comment"
                            Style="{StaticResource EditorComment}"
                            Text="{Binding CurrentPlot.Comment}" />
                </VerticalStackLayout>
            </Grid>
            <!-- PLOT LOCATION -->
            <VerticalStackLayout>
                <Label Text="Location"
                       Style="{StaticResource LabelPlot}" />

                <Border Padding="10,10,10,10">
                    <VerticalStackLayout>
                        <HorizontalStackLayout>
                            <Label Text="Easting"
                                   Style="{StaticResource LabelStand}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="PlotEasting" />
                        </HorizontalStackLayout>
                            <Entry Text="{Binding CurrentPlot.Easting, Converter={StaticResource ZeroToEmptyStringConverter}}"
                               Placeholder="Easting"
                               TextChanged="OnlyIntegerAllowed"
                               Style="{StaticResource EntryPlot}" />

                        <HorizontalStackLayout>
                            <Label Text="Northing"
                                   Style="{StaticResource LabelStand}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="PlotNorthing" />
                        </HorizontalStackLayout>
                        <Entry Text="{Binding CurrentPlot.Northing, Converter={StaticResource ZeroToEmptyStringConverter}}"
                               Placeholder="Northing"
                               TextChanged="OnlyIntegerAllowed"
                               Style="{StaticResource EntryPlot}" />
                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>

            <!-- PLOT HISTORY-->

            <VerticalStackLayout>
                <Label Text="Plot History"
                       Style="{StaticResource LabelPlot}" />

                <Border Padding="10,10,10,10">
                    <Grid RowDefinitions="Auto,Auto">
                        <!-- TREATED -->
                        <VerticalStackLayout Grid.Row="0"
                                             HorizontalOptions="Start">
                            <HorizontalStackLayout>
                                <CheckBox IsChecked="{Binding PlotWasTreated}" />

                                <!-- TODO: bind this and add logic to turn off any treatment if this is disabled -->
                                <Label Text="Treated"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="TreatedGeneral" />
                            </HorizontalStackLayout>
                            <CollectionView HorizontalOptions="StartAndExpand"
                                            Margin="20,0,0,0"
                                            IsVisible="{Binding PlotWasTreated}"
                                            ItemsSource="{Binding UiPlotTreatments, Mode=TwoWay}">

                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid ColumnDefinitions="50,Auto">
                                            <CheckBox IsChecked="{Binding IsActive}"
                                                      Grid.Column="0" />
                                            <Label Text="{Binding TreatmentName}"
                                                   VerticalOptions="Center"
                                                   Grid.Column="1" />
                                        </Grid>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>

                        <!-- PLANTING -->
                        <VerticalStackLayout Grid.Row="1">
                            <HorizontalStackLayout>
                                <CheckBox x:Name="WasPlanted"
                                          IsChecked="{Binding CurrentPlot.IsPlanted}" />
                                <Label Text="Planted"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="PlantedGeneral" />
                            </HorizontalStackLayout>
                            <VerticalStackLayout  IsVisible="{Binding Source={x:Reference WasPlanted}, Path=IsChecked}"
                                                  Margin="20,0,0,0"
                                                  RadioButtonGroup.GroupName="PlantedType"
                                                  RadioButtonGroup.SelectedValue="{Binding CurrentPlot.PlantedType, 
                                Mode=TwoWay}"
                                                  Spacing="0">
                                <RadioButton Content="Acadian"
                                             Value="{x:Static enum:PlantedTypeEnum.Acadian}" />

                                <RadioButton Content="Maritime Boreal"
                                             Value="{x:Static enum:PlantedTypeEnum.MaritimeBoreal}" />

                                <RadioButton Content="Coastal (Maritime Boreal)"
                                             Value="{x:Static enum:PlantedTypeEnum.Coastal}" />


                                <RadioButton Content="None"
                                             IsVisible="False"
                                             Value="{x:Static enum:PlantedTypeEnum.None}" />
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- FEC -->
            <VerticalStackLayout>
                <Label Style="{StaticResource LabelPlot}"
                       Text="Forest Ecosystem Classification (FEC)" />
                <Border>
                    <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                          ColumnDefinitions="Auto"
                          RowSpacing="10"
                          ColumnSpacing="20">
                        <HorizontalStackLayout Grid.Row="0">
                            <Label Text="Ecosite Group"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="EcositeGroup" />
                        </HorizontalStackLayout>

                        <VerticalStackLayout Grid.Row="1"
                                             Spacing="0"
                                             Grid.ColumnSpan="2"
                                             Margin="0,0,0,0">

                            <VerticalStackLayout  Margin="20,0,0,0"
                                                  Spacing="0"
                                                  RadioButtonGroup.GroupName="EcositeGroup"
                                                  RadioButtonGroup.SelectedValue="{Binding CurrentEcositeGroup, Mode=TwoWay}">
                                <RadioButton Content="HIDDEN"
                                             Margin="0"
                                             IsVisible="False"
                                             Value="{x:Static enum:EcositeGroup.None}" />
                                <RadioButton Content="Acadian"
                                             Margin="0"
                                             Value="{x:Static enum:EcositeGroup.Acadian}" />


                                <RadioButton Content="Maritime Boreal"
                                             Margin="0"
                                             Value="{x:Static enum:EcositeGroup.MaritimeBoreal}" />

                            </VerticalStackLayout>
                        </VerticalStackLayout>


                        <HorizontalStackLayout Grid.Row="4"
                                               Grid.Column="0">
                            <Label Text="Soil"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="FECSoil" />
                        </HorizontalStackLayout>

                        <Picker  Grid.Row="5"
                                 ItemsSource="{Binding LookupSoils}"
                                 SelectedItem="{Binding CurrentSoil}"
                                 WidthRequest="350"
                                 HorizontalOptions="Start" />


                        <HorizontalStackLayout Grid.Row="6"
                                               Grid.Column="0">
                            <Label Text="Vegetation"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="FECVeg" />
                        </HorizontalStackLayout>
                        <Picker Grid.Row="7"
                                Grid.Column="0"
                                ItemsSource="{Binding LookupVeg}"
                                SelectedItem="{Binding CurrentVeg}"
                                WidthRequest="350"
                                HorizontalOptions="Start" />
                        <HorizontalStackLayout Grid.Row="8"
                                               Grid.Column="0">
                            <Label Text="Ecodistrict"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="Ecosite" />
                        </HorizontalStackLayout>


                        <Entry Text="{Binding CurrentPlot.Ecodistrict, 
     Converter={StaticResource ZeroToEmptyStringConverter}}"
                               Grid.Row="9"
                               HorizontalOptions="Start"
                               TextChanged="OnlyIntegerAllowed"
                               WidthRequest="50" />





                        <HorizontalStackLayout Grid.Row="10"
                                               Grid.Column="0">
                            <Label Text="Ecosite"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="Ecosite" />
                        </HorizontalStackLayout>
                        <Label  Grid.Row="11"
                                Text="{Binding CurrentEcosite}"
                                WidthRequest="350"
                                HorizontalOptions="Start" />
                        <Label  Grid.Row="11"
                                Text="{Binding EcositeErrorMessage}"
                                TextColor="Red"
                                WidthRequest="350"
                                HorizontalOptions="Start" />
                        <HorizontalStackLayout Grid.Row="12"
                                               Grid.Column="0">
                            <Label Text="Exposure"
                                   Style="{StaticResource LabelPlot}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="Exposure" />
                        </HorizontalStackLayout>
                        <Picker  Grid.Row="13"
                                 ItemsSource="{Binding ListExposure}"
                                 SelectedItem="{Binding CurrentPlot.Exposure}"
                                 WidthRequest="350"
                                 HorizontalOptions="Start" />

                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- FOREST STRUCTURE-->
            <VerticalStackLayout>
                <Label Text="Regeneration"
                       Style="{StaticResource SubHeadline}" />
                <Border>
                    <Grid RowDefinitions="Auto,Auto,Auto,Auto"
                          ColumnDefinitions="300,Auto">
                        <HorizontalStackLayout Grid.Row="0">
                            <Label Text="Softwood  LIT Regen Height (2 - 6 m)"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="SWLITRegen" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Row="1">
                            <Label Text="Hardwood  LIT Regen Height (6 - 9 m)"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="HWLITRegen" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Row="2">
                            <Label Text="Beech Regeneration Stocking &gt;25%"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="StockingBeechRegeneration" />
                        </HorizontalStackLayout>

                        <CheckBox Grid.Row="0"
                                  Grid.Column="1"
                                  IsChecked="{Binding CurrentPlot.RegenHeightSWLIT}" />
                        <CheckBox Grid.Row="1"
                                  Grid.Column="1"
                                  IsChecked="{Binding CurrentPlot.RegenHeightHWLIT}" />
                        <CheckBox Grid.Row="2"
                                  Grid.Column="1"
                                  IsChecked="{Binding CurrentPlot.StockingBeechRegeneration}" />
                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- REGENERATION STOCKING -->
            <VerticalStackLayout>
                <Label Text="Regeneration Stocking"
                       Style="{StaticResource SubHeadline}" />

                <Border>

                    <Grid ColumnDefinitions="250,Auto"
                          RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                          ColumnSpacing="20">
                        <HorizontalStackLayout Grid.Row="0">
                            <Label Text="All Commercial Species (%)"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="StockingRegenCommercialSpecies" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Row="1">
                            <Label Text="LIT Species (%)"
                                   Style="{StaticResource LabelSubheading}"
                                   Grid.Row="5" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="StockingRegenLITSpecies" />
                        </HorizontalStackLayout>

                        <Picker Grid.Row="0"
                                Grid.Column="1"
                                Background="White"
                                WidthRequest="85"
                                ItemDisplayBinding="{Binding .}"
                                ItemsSource="{Binding ListPercentage}"
                                SelectedItem="{Binding CurrentPlot.StockingRegenCommercialSpecies}"
                                HorizontalOptions="Start" />



                        <Picker Grid.Row="1"
                                Grid.Column="1"
                                Background="White"
                                WidthRequest="85"
                                ItemDisplayBinding="{Binding .}"
                                ItemsSource="{Binding ListPercentage}"
                                SelectedItem="{Binding CurrentPlot.StockingRegenLITSpecies}"
                                HorizontalOptions="Start" />
                    </Grid>
                </Border>
            </VerticalStackLayout>
            <!-- Uneven Aged -->
            <VerticalStackLayout>
                <Label Text="Uneven Aged"
                       Style="{StaticResource SubHeadline}" />
                <Border>
                    <Grid ColumnDefinitions="250,Auto"
                          RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                          RowSpacing="5"
                          ColumnSpacing="20">

                        <HorizontalStackLayout Grid.Row="0">
                            <Label Text="Uneven Aged"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="UnevenAged" />
                        </HorizontalStackLayout>


                        <CheckBox Grid.Row="0"
                                  Grid.Column="1"
                                  IsChecked="{Binding CurrentPlot.UnevenAged}" />

                        <HorizontalStackLayout Grid.Row="1"
                                               IsVisible="{Binding CurrentPlot.UnevenAged,
                                        Converter={StaticResource BoolToVisibilityConverter},
                            ConverterParameter=collapsed}">
                            <Label Text="AGS / Patches AGS (mÂ²/ha)"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="AGSPatches" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Row="2"
                                               IsVisible="{Binding CurrentPlot.UnevenAged,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}">
                            <Label Text="One Cohort Senescent"
                                   Style="{StaticResource LabelSubheading}" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="OneCohortSenescent" />
                        </HorizontalStackLayout>


                        <CheckBox Grid.Row="2"
                                  Grid.Column="1"
                                  IsChecked="{Binding CurrentPlot.OneCohortSenescent}"
                                  IsVisible="{Binding CurrentPlot.UnevenAged,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}" />

                        <Entry Grid.Row="1"
                               Grid.Column="1"
                               WidthRequest="70"
                               IsVisible="{Binding CurrentPlot.UnevenAged,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}"
                               HorizontalOptions="CenterAndExpand"
                               Text="{Binding CurrentPlot.AGSPatches}"
                               TextChanged="OnlyIntegerAllowed"
                               Style="{StaticResource EntryParent}" />


                    </Grid>

                </Border>
            </VerticalStackLayout>


            <!-- FOREST STRUCTURE -->
            <VerticalStackLayout>
                <Label Text="Forest Structure"
                       Style="{StaticResource SubHeadline}" />
                <Border>
                        <Grid ColumnDefinitions="250,Auto"
                              RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                              RowSpacing="5"
                              ColumnSpacing="20">
                            <!--- LEFT HAND SIDE -->
                            <HorizontalStackLayout Grid.Row="0">
                                <Label Text="LIT Seed Tree Stocking (%)"
                                       Style="{StaticResource LabelSubheading}" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="StockingLITSeedTree" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout Grid.Row="1">
                                <Label Text="Blowdown (%)"
                                       Style="{StaticResource LabelSubheading}"
                                       Grid.Row="6" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="Blowdown" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout Grid.Row="5">
                                <Label Text="Understory Strata (%)"
                                       Style="{StaticResource LabelSubheading}" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="UnderstoryStrata" />
                            </HorizontalStackLayout>


                            <HorizontalStackLayout Grid.Row="6">

                                <Label Text="Understory Dominated By" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="UnderStoryDominatedBy" />
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Row="8">

                                <Label Text="Horizontal Structure" />
                                <ImageButton Source="info.png"
                                             Style="{StaticResource ImageButtonHelper}"
                                             Margin="10,0,0,0"
                                             Command="{Binding ShowHelperTextCommand}"
                                             CommandParameter="HorizontalStructure" />
                            </HorizontalStackLayout>

                            <!--- RIGHT HAND SIDE -->
                            <Picker Grid.Row="0"
                                    Grid.Column="1"
                                    Background="White"
                                    WidthRequest="85"
                                    ItemDisplayBinding="{Binding .}"
                                    ItemsSource="{Binding ListPercentage}"
                                    SelectedItem="{Binding CurrentPlot.StockingLITSeedTree}"
                                    HorizontalOptions="Start" />

                            <Picker Grid.Row="1"
                                    Grid.Column="1"
                                    Background="White"
                                    WidthRequest="85"
                                    ItemDisplayBinding="{Binding .}"
                                    ItemsSource="{Binding ListPercentage}"
                                    SelectedItem="{Binding CurrentPlot.Blowdown, Mode=TwoWay}"
                                    HorizontalOptions="Start" />

                            <Picker Grid.Row="5"
                                    Grid.Column="1"
                                    Background="White"
                                    WidthRequest="85"
                                    ItemDisplayBinding="{Binding .}"
                                    ItemsSource="{Binding ListPercentage}"
                                    SelectedItem="{Binding CurrentPlot.UnderstoryStrata}"
                                    HorizontalOptions="Start" />
                            
                            <!-- UnderstoryDominated -->
                            <VerticalStackLayout Grid.Row="7"
                                                 Grid.Column="0"
                                                 Spacing="0"
                                                 Grid.ColumnSpan="2"
                                                 Margin="220,0,0,0">
                                <VerticalStackLayout  RadioButtonGroup.GroupName="UnderstoryDominated"
                                                      RadioButtonGroup.SelectedValue="{Binding CurrentPlot.UnderstoryDominated, Mode=TwoWay}"
                                                      Spacing="0">
                                    <RadioButton Content="Trees"
                                                 IsVisible="False"
                                                 Value="{x:Static enum:UnderstoryDominated.None}" />

                                    <RadioButton Content="Trees"
                                                 Value="{x:Static enum:UnderstoryDominated.Trees}" />


                                    <RadioButton Content="Woody Shrubs"
                                                 Value="{x:Static enum:UnderstoryDominated.WoodyShrubs}" />

                                </VerticalStackLayout>
                            </VerticalStackLayout>

                            <!-- Patchy -->
                            <VerticalStackLayout Grid.Row="9"
                                                 Grid.Column="0"
                                                 Spacing="0"
                                                 Grid.ColumnSpan="2"
                                                 Margin="220,0,0,0">
                                <VerticalStackLayout  RadioButtonGroup.GroupName="HorizontalStructure"
                                                      RadioButtonGroup.SelectedValue="{Binding CurrentPlot.HorizontalStructure, Mode=TwoWay}"
                                                      Spacing="0">
                                    <RadioButton Content="HorizontalStructure"
                                                 IsVisible="False"
                                                 Value="{x:Static enum:HorizontalStructure.None}" />
                                    <RadioButton Content="Patchy"
                                                 Value="{x:Static enum:HorizontalStructure.Patchy}" />

                                    <RadioButton Content="Uniform"
                                                 Value="{x:Static enum:HorizontalStructure.Uniform}" />


                                </VerticalStackLayout>
                            </VerticalStackLayout>
                        </Grid>
                    </Border>
            </VerticalStackLayout>

            <!-- AGE -->
            <VerticalStackLayout>
                <HorizontalStackLayout>

                    <Label Text="Age Tree"
                           Style="{StaticResource LabelPlot}" />
                    <ImageButton Source="info.png"
                                 Style="{StaticResource ImageButtonHelper}"
                                 Margin="10,0,0,0"
                                 Command="{Binding ShowHelperTextCommand}"
                                 CommandParameter="AgeGeneral" />
                </HorizontalStackLayout>

                <Border>
                    <Grid RowDefinitions="Auto,Auto,Auto"
                          ColumnSpacing="5"
                          ColumnDefinitions="150,Auto,Auto">
                        <HorizontalStackLayout>
                            <Label Grid.Row="0"
                                   Grid.Column="0"
                                   Text="Species" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="AgeTreeSpecies" />
                        </HorizontalStackLayout>

                        <Picker Grid.Row="0"
                                Grid.Column="1"
                                WidthRequest="200"
                                SelectedItem="{Binding CurrentAgeTreeSpecies, Mode=TwoWay}"
                                ItemsSource="{Binding LookupTreeSpecies}"
                                ItemDisplayBinding="{Binding Name}" />

                        <HorizontalStackLayout Grid.Row="1"
                                               Grid.Column="0">
                            <Label  Text="Age" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="AgeTreeAge" />

                        </HorizontalStackLayout>

                        <Entry Grid.Row="1"
                               WidthRequest="50"
                               HorizontalOptions="End"
                               Text="{Binding CurrentPlot.AgeTreeAge}"
                               TextChanged="OnlyIntegerAllowed"
                               Style="{StaticResource EntryParent}"
                               Grid.Column="1" />
                        <HorizontalStackLayout Grid.Row="2"
                                               Grid.Column="0">
                            <Label Text="DBH (cm)" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="AgeDBH" />
                        </HorizontalStackLayout>

                        <Entry Grid.Row="2"
                               WidthRequest="50"
                               TextChanged="OnlyIntegerAllowed"
                               Text="{Binding CurrentPlot.AgeTreeDBH}"
                               Style="{StaticResource EntryParent}"
                               HorizontalOptions="End"
                               Grid.Column="1" />
                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- OLD GROWTH  -->
            <VerticalStackLayout>
                <HorizontalStackLayout>

                    <Label Text="Age Tree : Old Growth"
                           Style="{StaticResource LabelPlot}" />
                    <ImageButton Source="info.png"
                                 Style="{StaticResource ImageButtonHelper}"
                                 Margin="10,0,0,0"
                                 Command="{Binding ShowHelperTextCommand}"
                                 CommandParameter="AgeGeneral" />
                </HorizontalStackLayout>

                <Border>
                    <Grid RowDefinitions="Auto,Auto,Auto,Auto"
                          ColumnSpacing="5"
                          ColumnDefinitions="160,Auto,Auto">

                        <HorizontalStackLayout Grid.Row="0"
                                               Grid.Column="0">
                            <Label  Text="Present?" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="AgeTreeSpecies" />
                        </HorizontalStackLayout>
                        <CheckBox Grid.Row="0"
                                  Grid.Column="1"
                                  HorizontalOptions="Start"
                                  IsChecked="{Binding CurrentPlot.HasOldGrowth}" />

                        <HorizontalStackLayout Grid.Row="1"
                                               Grid.Column="0"
                                               IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}">
                            <Label Text="Species" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="OldGrowthSpecies" />
                        </HorizontalStackLayout>

                        <Picker Grid.Row="1"
                                Grid.Column="1"
                                WidthRequest="200"
                                IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}"
                                SelectedItem="{Binding CurrentOGTreeSpecies, Mode=TwoWay}"
                                ItemsSource="{Binding LookupTreeSpecies}"
                                    ItemDisplayBinding="{Binding Name, TargetNullValue=''}" />

                        <HorizontalStackLayout Grid.Row="2"
                                               Grid.Column="0"
                                               IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}">
                            <Label  Text="Age" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="OldGrowthAge" />

                        </HorizontalStackLayout>

                        <Entry Grid.Row="2"
                               WidthRequest="50"
                               IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}"
                               HorizontalOptions="End"
                               Text="{Binding CurrentPlot.OldGrowthAge}"
                               TextChanged="OnlyIntegerAllowed"
                               Style="{StaticResource EntryParent}"
                               Grid.Column="1" />
                        <HorizontalStackLayout Grid.Row="3"
                                               Grid.Column="0"
                                               IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}">
                            <Label Text="DBH (cm)" />
                            <ImageButton Source="info.png"
                                         Style="{StaticResource ImageButtonHelper}"
                                         Margin="10,0,0,0"
                                         Command="{Binding ShowHelperTextCommand}"
                                         CommandParameter="OldGrowthDBH" />
                        </HorizontalStackLayout>

                        <Entry Grid.Row="3"
                               IsVisible="{Binding CurrentPlot.HasOldGrowth,
            Converter={StaticResource BoolToVisibilityConverter},
ConverterParameter=collapsed}"
                               WidthRequest="50"
                               TextChanged="OnlyIntegerAllowed"
                               Text="{Binding CurrentPlot.OldGrowthDBH}"
                               Style="{StaticResource EntryParent}"
                               HorizontalOptions="End"
                               Grid.Column="1" />
                    </Grid>
                </Border>
            </VerticalStackLayout>


            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>